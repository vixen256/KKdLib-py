+++ KKdLib/meson.build
@@ -0,0 +1,66 @@
+project('KKdLib', 'cpp', version: '1.0.0')
+
+cpp = meson.get_compiler('cpp')
+
+add_project_arguments(
+	cpp.get_supported_arguments('-march=skylake'),
+	language: 'cpp',
+)
+
+cmake = import('cmake')
+opt_var = cmake.subproject_options()
+opt_var.add_cmake_defines({'LIBDEFLATE_BUILD_STATIC_LIB': true}, {'LIBDEFLATE_BUILD_SHARED_LIB': false}, {'CMAKE_POSITION_INDEPENDENT_CODE': true})
+
+xxhash = subproject('xxhash', default_options: ['default_library=static', 'cli=false'])
+libdeflate = cmake.subproject('libdeflate', options: opt_var)
+
+KKdLib_inc = include_directories('.')
+KKdLib_lib = static_library(
+	'KKdLib',
+	include_directories: KKdLib_inc,
+	sources: [
+		'database/sprite.cpp',
+		'f2/enrs.cpp',
+		'f2/header.cpp',
+		'f2/pof.cpp',
+		'f2/struct.cpp',
+		'io/file_stream.cpp',
+		'io/memory_stream.cpp',
+		'io/path.cpp',
+		'io/stream.cpp',
+		'prj/stack_allocator.cpp',
+		'prj/time.cpp',
+		'aes.cpp',
+		'default.cpp',
+		'deflate.cpp',
+		'divafile.cpp',
+		'farc.cpp',
+		'half_t.cpp',
+		'hash.cpp',
+		'image.cpp',
+		'interpolation.cpp',
+		'key_val.cpp',
+		'kf.cpp',
+		'mat.cpp',
+		'quat.cpp',
+		'sort.cpp',
+		'spr.cpp',
+		'str_utils.cpp',
+		'time.cpp',
+		'txp.cpp',
+		'vec.cpp',
+	],
+	dependencies: [
+		xxhash.get_variable('xxhash_dep'),
+		libdeflate.dependency('libdeflate_static'),
+	]
+)
+
+KKdLib_dep = declare_dependency(
+	link_with: KKdLib_lib,
+	include_directories: KKdLib_inc,
+	dependencies: [
+		xxhash.get_variable('xxhash_dep'),
+		libdeflate.dependency('libdeflate_static'),
+	]
+)

+++ KKdLib/subprojects/libdeflate.wrap
@@ -0,0 +1,3 @@
+[wrap-git]
+url = https://github.com/ebiggers/libdeflate.git
+revision = master

+++ KKdLib/subprojects/xxhash.wrap
@@ -0,0 +1,13 @@
+[wrap-file]
+directory = xxHash-0.8.3
+source_url = https://github.com/Cyan4973/xxHash/archive/v0.8.3.tar.gz
+source_filename = xxHash-0.8.3.tar.gz
+source_hash = aae608dfe8213dfd05d909a57718ef82f30722c392344583d3f39050c7f29a80
+patch_filename = xxhash_0.8.3-2_patch.zip
+patch_url = https://wrapdb.mesonbuild.com/v2/xxhash_0.8.3-2/get_patch
+patch_hash = c7f78fc2d08ec21ff1bae928d7bdcddb42713a07d9d973a885c59ea7f8cf6bc8
+source_fallback_url = https://github.com/mesonbuild/wrapdb/releases/download/xxhash_0.8.3-2/xxHash-0.8.3.tar.gz
+wrapdb_version = 0.8.3-2
+
+[provide]
+libxxhash = xxhash_dep
